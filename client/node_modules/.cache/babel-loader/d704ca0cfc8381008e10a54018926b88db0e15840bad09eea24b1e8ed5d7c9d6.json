{"ast":null,"code":"var _jsxFileName = \"D:\\\\ZapRide\\\\client\\\\src\\\\components\\\\Cards\\\\BookerButton.jsx\",\n  _s = $RefreshSig$();\nimport * as React from 'react';\nimport Button from '@mui/material/Button';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BookerButton({\n  user,\n  curruser,\n  currentChat,\n  setCurrentChat\n}) {\n  _s();\n  console.log(curruser);\n  console.log(\"BookerButton props:\", {\n    setCurrentChat,\n    currentChat\n  });\n  const navigate = useNavigate();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const handleMessageClick = () => {\n    const getConversation = async () => {\n      try {\n        const res = await axios.get(\"https://car-saathi.onrender.com/api/conversation/getConversation/\" + user._id);\n        let conversations = res.data;\n        console.log(res.data);\n\n        // Find if conversation with the driver already exists\n        let chatExists = conversations === null || conversations === void 0 ? void 0 : conversations.find(conversation => conversation.members.includes(curruser));\n        if (chatExists) {\n          console.log(\"chatexists\", chatExists);\n          setCurrentChat(chatExists);\n          if (currentChat) {\n            navigate(\"/messenger\");\n          }\n        } else {\n          const res = await axios.post(\"https://car-saathi.onrender.com/api/conversation/\", {\n            senderId: curruser,\n            receiverId: user._id\n          });\n          console.log(res.data);\n          setCurrentChat(res.data);\n          console.log(currentChat);\n          navigate(\"/messenger\");\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getConversation();\n  };\n  console.log(currentChat);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      id: \"basic-button\",\n      \"aria-controls\": open ? 'basic-menu' : undefined,\n      \"aria-haspopup\": \"true\",\n      \"aria-expanded\": open ? 'true' : undefined,\n      onClick: handleClick,\n      children: user.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      id: \"basic-menu\",\n      anchorEl: anchorEl,\n      open: open,\n      onClose: handleClose,\n      MenuListProps: {\n        'aria-labelledby': 'basic-button'\n      },\n      children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: () => navigate(`/profile/${user._id}`),\n        children: \"View Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: handleMessageClick,\n        children: \"Message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(BookerButton, \"pYXoAqUaju4H0wrmywGcseSEGlw=\", false, function () {\n  return [useNavigate];\n});\n_c = BookerButton;\nvar _c;\n$RefreshReg$(_c, \"BookerButton\");","map":{"version":3,"names":["React","Button","Menu","MenuItem","useNavigate","axios","jsxDEV","_jsxDEV","BookerButton","user","curruser","currentChat","setCurrentChat","_s","console","log","navigate","anchorEl","setAnchorEl","useState","open","Boolean","handleClick","event","currentTarget","handleClose","handleMessageClick","getConversation","res","get","_id","conversations","data","chatExists","find","conversation","members","includes","post","senderId","receiverId","err","children","id","undefined","onClick","name","fileName","_jsxFileName","lineNumber","columnNumber","onClose","MenuListProps","_c","$RefreshReg$"],"sources":["D:/ZapRide/client/src/components/Cards/BookerButton.jsx"],"sourcesContent":["import * as React from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nexport default function BookerButton({user,curruser,currentChat,setCurrentChat}) {\r\n    console.log(curruser)\r\n    console.log(\"BookerButton props:\", { setCurrentChat, currentChat });\r\n  const navigate = useNavigate()\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  const handleMessageClick = () => {\r\n    const getConversation = async () => {\r\n      try {\r\n        const res = await axios.get(\r\n          \"https://car-saathi.onrender.com/api/conversation/getConversation/\" +\r\n            user._id\r\n        );\r\n        let conversations = res.data;\r\n        console.log(res.data)\r\n\r\n        // Find if conversation with the driver already exists\r\n        let chatExists = conversations?.find((conversation) =>\r\n          conversation.members.includes(curruser)\r\n        );\r\n\r\n        if (chatExists) {\r\n            console.log(\"chatexists\",chatExists)\r\n          setCurrentChat(chatExists);\r\n          if (currentChat) {\r\n            navigate(\"/messenger\");\r\n          }\r\n        } else {\r\n          const res = await axios.post(\r\n            \"https://car-saathi.onrender.com/api/conversation/\",\r\n            { senderId: curruser, receiverId: user._id }\r\n          );\r\n          console.log(res.data)\r\n          setCurrentChat(res.data);\r\n    console.log(currentChat)\r\n\r\n          navigate(\"/messenger\");\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    getConversation();\r\n  };\r\n  console.log(currentChat)\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        id=\"basic-button\"\r\n        aria-controls={open ? 'basic-menu' : undefined}\r\n        aria-haspopup=\"true\"\r\n        aria-expanded={open ? 'true' : undefined}\r\n        onClick={handleClick}\r\n      >\r\n        {user.name}\r\n      </Button>\r\n      <Menu\r\n        id=\"basic-menu\"\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleClose}\r\n        MenuListProps={{\r\n          'aria-labelledby': 'basic-button',\r\n        }}\r\n      >\r\n        <MenuItem onClick={()=>navigate(`/profile/${user._id}`)}>View Profile</MenuItem>\r\n        <MenuItem onClick={handleMessageClick}>Message</MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}